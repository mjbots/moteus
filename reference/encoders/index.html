
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mjbots.github.io/moteus/reference/encoders/">
      
      
        <link rel="prev" href="../pinouts/">
      
      
        <link rel="next" href="../client-tools/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Encoders - moteus Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../style.css">
    
      <link rel="stylesheet" href="../../stylesheets/iv-viewer.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#encoder-configuration-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="moteus Documentation" class="md-header__button md-logo" aria-label="moteus Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            moteus Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Encoders
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/mjbots/moteus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mjbots/moteus
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Introduction

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/mechanical-setup/" class="md-tabs__link">
          
  
  
  Using moteus

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integration/python/" class="md-tabs__link">
          
  
  
  Integration

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../troubleshooting/calibration/" class="md-tabs__link">
          
  
  
  Troubleshooting

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../pinouts/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="moteus Documentation" class="md-nav__button md-logo" aria-label="moteus Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    moteus Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mjbots/moteus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mjbots/moteus
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Using moteus
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Using moteus
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/mechanical-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mechanical Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/electrical-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Electrical Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/software-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/encoder-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Encoder Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calibration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pid-tuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PID Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/control-modes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Modes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Advanced Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/hall-effects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Motor with Hall Effects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/dual-encoders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dual Encoders
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Integration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integration/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integration/cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++ Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integration/can-fd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raw CAN-FD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Host Platforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Host Platforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/raspberry-pi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raspberry Pi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/jetson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nvidia Jetson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/socketcan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    socketcan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/arduino/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arduino
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calibration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/no-motion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    No Motion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/limited-torque/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Limited Torque
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/gate-driver-faults/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gate Driver Faults
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pinouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pinouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Encoders
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Encoders
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-encoders" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Encoders
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auxiliary-port" class="md-nav__link">
    <span class="md-ellipsis">
      Auxiliary Port
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-pin-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      I/O Pin capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Pin capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r411-pins-aux1enc" class="md-nav__link">
    <span class="md-ellipsis">
      r4.11 Pins (AUX1/ENC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r411-pins-aux2abs" class="md-nav__link">
    <span class="md-ellipsis">
      r4.11 Pins (AUX2/ABS)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c1-pins" class="md-nav__link">
    <span class="md-ellipsis">
      c1 Pins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n1x1-pins-aux1enc" class="md-nav__link">
    <span class="md-ellipsis">
      n1/x1 Pins (AUX1/ENC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c1n1x1-pins-aux2abs" class="md-nav__link">
    <span class="md-ellipsis">
      c1/n1/x1 Pins (AUX2/ABS)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pin-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Pin Capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pin Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#software-quadrature-input" class="md-nav__link">
    <span class="md-ellipsis">
      Software Quadrature Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hall-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      Hall sensor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-input" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i2c-master" class="md-nav__link">
    <span class="md-ellipsis">
      I2C Master
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spi-master" class="md-nav__link">
    <span class="md-ellipsis">
      SPI Master
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-quadrature-input" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Quadrature Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinecosine" class="md-nav__link">
    <span class="md-ellipsis">
      Sine/cosine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analog-input" class="md-nav__link">
    <span class="md-ellipsis">
      Analog input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uart" class="md-nav__link">
    <span class="md-ellipsis">
      UART
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pin-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Pin Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Source Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Output Configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../firmware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flashing and Building Firmware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Application Limits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory of Operation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/can/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CAN Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/registers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Register Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/diagnostic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diagnostic Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-encoders" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Encoders
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auxiliary-port" class="md-nav__link">
    <span class="md-ellipsis">
      Auxiliary Port
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-pin-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      I/O Pin capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Pin capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r411-pins-aux1enc" class="md-nav__link">
    <span class="md-ellipsis">
      r4.11 Pins (AUX1/ENC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r411-pins-aux2abs" class="md-nav__link">
    <span class="md-ellipsis">
      r4.11 Pins (AUX2/ABS)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c1-pins" class="md-nav__link">
    <span class="md-ellipsis">
      c1 Pins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n1x1-pins-aux1enc" class="md-nav__link">
    <span class="md-ellipsis">
      n1/x1 Pins (AUX1/ENC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c1n1x1-pins-aux2abs" class="md-nav__link">
    <span class="md-ellipsis">
      c1/n1/x1 Pins (AUX2/ABS)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pin-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Pin Capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pin Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#software-quadrature-input" class="md-nav__link">
    <span class="md-ellipsis">
      Software Quadrature Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hall-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      Hall sensor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-input" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i2c-master" class="md-nav__link">
    <span class="md-ellipsis">
      I2C Master
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spi-master" class="md-nav__link">
    <span class="md-ellipsis">
      SPI Master
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-quadrature-input" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Quadrature Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinecosine" class="md-nav__link">
    <span class="md-ellipsis">
      Sine/cosine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analog-input" class="md-nav__link">
    <span class="md-ellipsis">
      Analog input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uart" class="md-nav__link">
    <span class="md-ellipsis">
      UART
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pin-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Pin Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Source Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Output Configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="encoder-configuration-reference">Encoder Configuration Reference<a class="headerlink" href="#encoder-configuration-reference" title="Permanent link">&para;</a></h1>
<p>This page contains detailed technical reference for advanced encoder configuration.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>moteus includes an onboard on-axis magnetic encoder and supports a
number of options for using external encoders.  To understand how to
use them, we first need to know the two things that moteus needs
encoders for:</p>
<ul>
<li><em>Commutation</em>: moteus needs to know the electrical relationship
  between the stator and the rotor in order to apply torque.</li>
<li><em>Output</em>: moteus needs to know the position and velocity of the
  output shaft in order to follow commanded trajectories.</li>
</ul>
<p>By default, the onboard magnetic encoder (AS5047P) is assumed to sense
the rotor.  It is also used as the source for position and velocity of
the output constrained by a configurable reduction ratio.</p>
<p>Configuration is performed in 3 stages: first is the auxiliary port
configuration, second is encoder source configuration, and finally is
the output configuration.</p>
<p><img alt="IO Structure" src="../io_structure.png" /></p>
<h2 id="supported-encoders">Supported Encoders<a class="headerlink" href="#supported-encoders" title="Permanent link">&para;</a></h2>
<p>The following encoders are currently supported by moteus:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Interface Method</th>
<th>Performance</th>
<th>Mounting</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td>Onboard AS5047P</td>
<td>SPI (integrated)</td>
<td>+++</td>
<td>on-axis</td>
<td>Included</td>
</tr>
<tr>
<td>AS5047x</td>
<td>SPI</td>
<td>+++</td>
<td>on-axis</td>
<td>$</td>
</tr>
<tr>
<td>AS5048B</td>
<td>I2C</td>
<td>++</td>
<td>on-axis</td>
<td>$</td>
</tr>
<tr>
<td>AS5600</td>
<td>I2C</td>
<td>+</td>
<td>on-axis</td>
<td>$</td>
</tr>
<tr>
<td>AksIM-2</td>
<td>RS422 w/ 5V</td>
<td>+++++</td>
<td>off-axis</td>
<td>$$$</td>
</tr>
<tr>
<td>CUI AMT21x</td>
<td>RS422 w/ 5V</td>
<td>++++</td>
<td>shaft</td>
<td>$$</td>
</tr>
<tr>
<td>CUI AMT22x</td>
<td>SPI w/ 5V</td>
<td>++++</td>
<td>shaft</td>
<td>$$</td>
</tr>
<tr>
<td>MA600</td>
<td>SPI</td>
<td>++++</td>
<td>on/off-axis</td>
<td>$</td>
</tr>
<tr>
<td>MA732</td>
<td>SPI</td>
<td>+++</td>
<td>on/off-axis</td>
<td>$</td>
</tr>
<tr>
<td>iC-PZ</td>
<td>SPI w/ 5V</td>
<td>+++++</td>
<td>off-axis</td>
<td>$$$</td>
</tr>
<tr>
<td>Quadrature</td>
<td>Quadrature</td>
<td>variable</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>Sine/Cosine</td>
<td>Sine/Cosine</td>
<td>+</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>Hall effect</td>
<td>Hall effect</td>
<td></td>
<td>x</td>
<td>$</td>
</tr>
</tbody>
</table>
<h2 id="auxiliary-port">Auxiliary Port<a class="headerlink" href="#auxiliary-port" title="Permanent link">&para;</a></h2>
<p>There are two auxiliary ports on moteus, each with pins that can be
used for various functions.</p>
<p>They can provide power to external devices in addition to I/O pins:</p>
<table>
<thead>
<tr>
<th></th>
<th>3V</th>
<th>5V</th>
<th>12V</th>
</tr>
</thead>
<tbody>
<tr>
<td>moteus-r4.5</td>
<td>50mA</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>moteus-r4.8-4.11</td>
<td>100mA</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>moteus-c1</td>
<td>50mA</td>
<td>100mA</td>
<td>N/A</td>
</tr>
<tr>
<td>moteus-n1</td>
<td>100mA</td>
<td>200mA</td>
<td>N/A</td>
</tr>
<tr>
<td>moteus-x1</td>
<td>100mA</td>
<td>200mA</td>
<td>150mA</td>
</tr>
</tbody>
</table>
<h2 id="io-pin-capabilities">I/O Pin capabilities<a class="headerlink" href="#io-pin-capabilities" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Con</strong>: The pin number on the connector</li>
<li><strong>Aux</strong>: The number used to configure the pin in <code>aux?.pins.X</code></li>
<li><strong>SPI</strong>: Serial peripheral interface support</li>
<li><strong>ADC/Sin/Cos</strong>: Supports analog input, and sine/cosine input</li>
<li><strong>I2C</strong>: Inter-integrated circuit protocol</li>
<li><strong>HW Quad/PWM</strong>: Supports "hardware" quadrature input and PWM output</li>
</ul>
<h3 id="r411-pins-aux1enc">r4.11 Pins (AUX1/ENC)<a class="headerlink" href="#r411-pins-aux1enc" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>moteus r4.5/8/11</th>
<th>Con</th>
<th>Aux</th>
<th>SPI</th>
<th>ADC/Sin/Cos</th>
<th>I2C</th>
<th>HW Quad/PWM</th>
<th>UART</th>
<th>5VT</th>
</tr>
</thead>
<tbody>
<tr>
<td>3.3V  (3)</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>2</td>
<td>0</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>GND (G)</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>K</td>
<td>4</td>
<td>1</td>
<td>CLK</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>I</td>
<td>5</td>
<td>2</td>
<td>MISO</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>O</td>
<td>6</td>
<td>3</td>
<td>MOSI</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="r411-pins-aux2abs">r4.11 Pins (AUX2/ABS)<a class="headerlink" href="#r411-pins-aux2abs" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>moteus r4.5/8/11</th>
<th>Con</th>
<th>Aux</th>
<th>SPI</th>
<th>ADC/Sin/Cos</th>
<th>I2C</th>
<th>HW Quad/PWM</th>
<th>UART</th>
<th>5VT</th>
</tr>
</thead>
<tbody>
<tr>
<td>3.3V (3)</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>0</td>
<td></td>
<td></td>
<td>SCL</td>
<td></td>
<td>RX</td>
<td>X</td>
</tr>
<tr>
<td></td>
<td>3</td>
<td>1</td>
<td></td>
<td></td>
<td>SDA</td>
<td></td>
<td>TX</td>
<td>X</td>
</tr>
<tr>
<td>GND (G)</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DBG 1</td>
<td></td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>DBG 2</td>
<td></td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<p>Note: For moteus r4.5/8/11, DBG 1/2 are not present on the ABS connector, but are exposed pads on the circuit board.</p>
<h3 id="c1-pins">c1 Pins<a class="headerlink" href="#c1-pins" title="Permanent link">&para;</a></h3>
<p>The moteus-c1 has limited AUX1 port availability. Only pins D and E from AUX1 are exposed on an unpopulated 0.05" through-hole land pattern. I2C pullups are not available on moteus-c1 for aux1.</p>
<table>
<thead>
<tr>
<th>moteus c1</th>
<th>Con</th>
<th>AUX</th>
<th>SPI</th>
<th>ADC/Sin/Cos</th>
<th>I2C</th>
<th>HW Quad/PWM</th>
<th>UART</th>
<th>5VT</th>
</tr>
</thead>
<tbody>
<tr>
<td>D</td>
<td></td>
<td>3</td>
<td></td>
<td></td>
<td>SCL</td>
<td>2.1</td>
<td>RX</td>
<td>X</td>
</tr>
<tr>
<td>E</td>
<td></td>
<td>4</td>
<td></td>
<td></td>
<td>SDA</td>
<td>2.2</td>
<td>TX</td>
<td>X</td>
</tr>
</tbody>
</table>
<h3 id="n1x1-pins-aux1enc">n1/x1 Pins (AUX1/ENC)<a class="headerlink" href="#n1x1-pins-aux1enc" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>moteus n1/x1</th>
<th>Con</th>
<th>AUX</th>
<th>SPI</th>
<th>ADC/Sin/Cos</th>
<th>I2C</th>
<th>HW Quad/PWM</th>
<th>UART</th>
<th>5VT</th>
</tr>
</thead>
<tbody>
<tr>
<td>5V (5)</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3.3V (3)</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>A</td>
<td>3</td>
<td>0</td>
<td>CLK</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>B *</td>
<td>4</td>
<td>1</td>
<td>MISO</td>
<td></td>
<td></td>
<td>3.1</td>
<td>RX</td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>5</td>
<td>2</td>
<td>MOSI</td>
<td>X</td>
<td></td>
<td>3.2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>D</td>
<td>6</td>
<td>3</td>
<td></td>
<td></td>
<td>SCL</td>
<td>2.1</td>
<td>RX</td>
<td>X</td>
</tr>
<tr>
<td>E</td>
<td>7</td>
<td>4</td>
<td></td>
<td></td>
<td>SDA</td>
<td>2.2</td>
<td>TX</td>
<td>X</td>
</tr>
<tr>
<td>GND (G)</td>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Note: For moteus n1, the B pin software configured pullup cannot be used effectively. Thus the B pin is unsuitable for open-drain inputs like hall effect sensors unless external pullups are provided.</p>
<p>Note: The moteus n1 and x1 have a hardware RS422 transceiver connected to aux1's pins D and E which can be enabled through configuration. RS485 devices like the CUI AMT21x can be used if the RS422 pin Y is connected to A and RS422 pin Z is connected to B.</p>
<h3 id="c1n1x1-pins-aux2abs">c1/n1/x1 Pins (AUX2/ABS)<a class="headerlink" href="#c1n1x1-pins-aux2abs" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>moteus n1/x1</th>
<th>Con</th>
<th>AUX</th>
<th>SPI</th>
<th>ADC/Sin/Cos</th>
<th>I2C</th>
<th>HW Quad/PWM</th>
<th>UART</th>
<th>5VT</th>
</tr>
</thead>
<tbody>
<tr>
<td>5V (5)</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3.3V (3)</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>A</td>
<td>3</td>
<td>0</td>
<td>CLK</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>B</td>
<td>4</td>
<td>1</td>
<td>MISO</td>
<td>X</td>
<td>SDA</td>
<td></td>
<td>RX</td>
<td>X</td>
</tr>
<tr>
<td>C</td>
<td>5</td>
<td>2</td>
<td>MOSI</td>
<td>X</td>
<td>SCL</td>
<td>4.1</td>
<td>TX</td>
<td>X</td>
</tr>
<tr>
<td>D</td>
<td>6</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td>4.2</td>
<td>RX</td>
<td>X</td>
</tr>
<tr>
<td>GND (G)</td>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="pin-capabilities">Pin Capabilities<a class="headerlink" href="#pin-capabilities" title="Permanent link">&para;</a></h2>
<p>The following capabilities can be used.  Some are supported on any
pins, others only on select pins.</p>
<h3 id="software-quadrature-input">Software Quadrature Input<a class="headerlink" href="#software-quadrature-input" title="Permanent link">&para;</a></h3>
<p>Pins: any</p>
<p>The software quadrature feature uses GPIO pins to read incremental
quadrature encoders.  It is capable of counting at 200,000 counts per
second without error, but incurs processor overhead that increases
with count rate.  Higher overhead means the latency to respond to CAN
messages increases.</p>
<h3 id="hall-sensor">Hall sensor<a class="headerlink" href="#hall-sensor" title="Permanent link">&para;</a></h3>
<p>Pins: any</p>
<p>3 hall sensor inputs are required.  For many hall sensors, the pullup
must be configured for the auxiliary port pin in question.</p>
<p>When using hall effect sensors as the commutation source, calibration
with moteus_tool requires the <code>--cal-hall</code> option be passed.</p>
<h3 id="index">Index<a class="headerlink" href="#index" title="Permanent link">&para;</a></h3>
<p>Pins: any</p>
<p>This is a single pin that is high when the encoder is in a known
location.  It can be fed from the "I" signal of an ABI output, or a
dedicated homing sensor.</p>
<h3 id="gpio-input">GPIO Input<a class="headerlink" href="#gpio-input" title="Permanent link">&para;</a></h3>
<p>Pins: any</p>
<p>Any pin may be designated as a GPIO input.  Its value may be read over
the diagnostic or register protocols.</p>
<h3 id="i2c-master">I2C Master<a class="headerlink" href="#i2c-master" title="Permanent link">&para;</a></h3>
<p>Pins: select</p>
<p>Between 1 and 3 I2C devices may be periodically polled at rates up to
200Hz.  The associated pins on moteus r4.5/8/11 have permanently
configured 2kohm pullup resistors.</p>
<h3 id="spi-master">SPI Master<a class="headerlink" href="#spi-master" title="Permanent link">&para;</a></h3>
<p>Pins: select</p>
<p>A variety of SPI based peripherals are supported.  This mode is also
used for the onboard encoder, which when enabled, claims the CLK,
MOSI, and MISO pins on auxiliary port 1.</p>
<h3 id="hardware-quadrature-input">Hardware Quadrature Input<a class="headerlink" href="#hardware-quadrature-input" title="Permanent link">&para;</a></h3>
<p>Pins: select</p>
<p>Hardware quadrature pins use microcontroller peripherals to process
quadrature input at any speed with no processor overhead.</p>
<h3 id="sinecosine">Sine/cosine<a class="headerlink" href="#sinecosine" title="Permanent link">&para;</a></h3>
<p>Pins: select</p>
<p>Analog sine/cosine inputs are supported with a configurable common
mode voltage.</p>
<h3 id="analog-input">Analog input<a class="headerlink" href="#analog-input" title="Permanent link">&para;</a></h3>
<p>Pins: select</p>
<p>Arbitary analog inputs can be read either over the diagnostic or
register protocol.</p>
<h3 id="uart">UART<a class="headerlink" href="#uart" title="Permanent link">&para;</a></h3>
<p>Pins: select</p>
<p>A variety of asynchronous serial encoders and debugging facilities are
supported.</p>
<p>The moteus-n1 and moteus-x1 additionally have a hardware RS422
transceiver connected to aux1's pins D and E which can be enabled
through configuration.  RS485 devices like the CUI AMT21x can be used
if the RS422 pin Y is connected to A and RS422 pin Z is connected to
B.</p>
<h3 id="pin-configuration">Pin Configuration<a class="headerlink" href="#pin-configuration" title="Permanent link">&para;</a></h3>
<p>Auxiliary port configuration is achieved in two steps.  First, the
<code>aux[12].pins.X.mode</code> value is set to the proper capability for each
pin.  <code>aux[12].pins.X.pull</code> can be used to configure an optional
pullup or pulldown for some modes.  Second, the corresponding
capabilities must be configured in one of the capability specific
sections of <code>aux[12]</code>.  For instance, for each auxiliary port, the SPI
configuration in <code>aux[12].spi</code> has a <code>mode</code> to select what the slave
device is and a <code>rate_hz</code> to define the frequency of the SPI
peripheral.</p>
<p>For I2C ports, up to 3 different slave devices may be configured, in
each of <code>aux[12].i2c.devices.[012]</code>.</p>
<p>The diagnostic values in <code>aux[12]</code> can be used to monitor for errors
from mis-configuration or mis-operation.</p>
<h2 id="source-configuration">Source Configuration<a class="headerlink" href="#source-configuration" title="Permanent link">&para;</a></h2>
<p>Once the auxiliary ports have been configured, next encoder sources
should be configured in <code>motor_position.sources</code>.  Up to 3 sources may
be configured, with the available types roughly corresponding to the
categories available from the auxiliary ports.  Typically, source 0 is
used for the sensor that is used for commutation.</p>
<p>For each source <code>motor_position.sources.[012].aux_number</code> should be
either "1" or "2", to select which auxiliary port the sensor should be
read from.  <code>motor_position.sources.[012].type</code> selects the type of
sensor.  For I2C based sources,
<code>motor_position.sources.[012].i2c_device</code> selects <em>which</em> I2C device
on that auxiliary port is used.</p>
<p>For sources that are incremental only, like quadrature, a source level
index may be configured in
<code>motor_position.sources.[012].incremental_index</code>.  This should be used
if the incremental source is needed to provide position for
commutation.</p>
<p>Each source can be marked as measuring the rotor or the output in
<code>motor_position.sources.[012].reference</code>.</p>
<p>Each source has configuration that determines how to map the raw value
provided by the device into a rotary angle.  <code>cpr</code> is the number of
counts per revolution, <code>offset</code> provides an integral count offset, and
<code>sign</code> can be used to invert the reading.  The final reading is
<code>(raw + offset) * sign / cpr</code>.</p>
<p>Finally, each source has a configurable low pass filter, with cutoff
frequency set by <code>motor_position.sources.[012].pll_filter_hz</code>.  It may
be set to 0 to disable the filter.  If disabled no velocity will be
interpolated on sensors that do not provide it natively.</p>
<h2 id="output-configuration">Output Configuration<a class="headerlink" href="#output-configuration" title="Permanent link">&para;</a></h2>
<p>The third major stage controls how the sources are used by the motor
controller.  Some source selections may be left at -1, which disables
that feature.</p>
<p><code>motor_position.commutation_source</code> selects which source is used to
provide rotor position for commutation purposes.  It is typically left
at source 0 and is required.  Note, quadrature sources are not
recommended for commutation as they can lose counts and require
additional application level homing support on each power-on.</p>
<p><code>motor_position.output.source</code> selects which source is used to provide
output position and velocity and is required.</p>
<p><code>motor_position.output.offset</code> and <code>motor_position.output.sign</code> are
used to transform the output position to achieve a given zero point
and rotational direction.</p>
<p><code>motor_position.output.reference_source</code> optionally configures a
source that is used solely to disambiguate the output position at
startup.  It could be a low-rate I2C based sensor for instance, or an
index source configured from a homing switch.</p>
<p>Finally, <code>motor_position.rotor_to_output_ratio</code> defines the number of
turns of the output for one turn of the rotor.  This is used to map
the readings from sensors that are defined relative to one into the
other.  For gear reducers (almost all configurations), this will be
less than one.  For example, a 4x gear reduction would be entered as
0.25.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../javascripts/iv-viewer.min.js"></script>
      
        <script src="../../javascripts/image-zoom.js"></script>
      
        <script src="../../javascripts/toc-collapse.js"></script>
      
    
  </body>
</html>